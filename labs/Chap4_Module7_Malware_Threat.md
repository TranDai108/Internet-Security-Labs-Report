# Chapter 4: CEH v10 Module 7 - Malware Threats

Chương này khám phá các loại mã độc khác nhau như Trojan, virus và cách chúng được sử dụng để chiếm quyền kiểm soát, theo dõi và tấn công hệ thống nạn nhân.

---

### Lab 1: Giành quyền kiểm soát máy nạn nhân bằng njRAT (P.6)

- **Kịch bản**: Kẻ tấn công sử dụng một Remote Access Trojan (RAT) để điều khiển máy tính của nạn nhân từ xa mà không bị phát hiện.
- **Mục tiêu**: Tìm hiểu cách tạo và sử dụng njRAT để thực hiện các hành động như quản lý file, theo dõi bàn phím, và điều khiển desktop từ xa.
- **Công cụ**: njRAT.
- **Tóm tắt thực hiện**:
  1. Trên máy tấn công, khởi chạy njRAT và cấu hình cổng lắng nghe.
  2. Sử dụng tính năng "Builder" để tạo một file server độc hại, sau đó gửi cho máy nạn nhân.
  3. Khi nạn nhân chạy file, một kết nối sẽ được thiết lập về máy tấn công.
  4. Từ giao diện njRAT, kẻ tấn công có thể thực hiện nhiều hành động: quản lý file, xem tiến trình, mở Remote Desktop, Keylogger, và thậm chí chat với nạn nhân.
- **Kết quả**: Mã độc njRAT cho phép kẻ tấn công kiểm soát hoàn toàn máy nạn nhân, duy trì kết nối ngay cả khi nạn nhân khởi động lại máy, cho thấy mức độ nguy hiểm của các công cụ RAT.

> *Để xem đầy đủ hình ảnh các bước thực hiện, vui lòng tham khảo file báo cáo gốc tại mục `report/`.*

---

### Lab 2: Che giấu Trojan bằng SwayzCryptor (P.23)

- **Kịch bản**: Kẻ tấn công cần làm cho mã độc của mình "không thể bị phát hiện" (Fully Undetectable - FUD) để qua mặt các phần mềm diệt virus.
- **Mục tiêu**: Học cách mã hóa (crypt) một Trojan để nó không bị các chương trình diệt virus nhận diện.
- **Công cụ**: SwayzCryptor, VirusTotal, njRAT.
- **Tóm tắt thực hiện**:
  1. Sử dụng VirusTotal để quét một file mã độc (tạo từ Lab 1) và thấy rằng nó bị nhiều phần mềm Antivirus phát hiện.
  2. Sử dụng SwayzCryptor để mã hóa file mã độc, bật các tùy chọn như `Start up` và `Disable UAC`.
  3. Quét lại file đã mã hóa trên VirusTotal và thấy số lượng phát hiện giảm đáng kể.
  4. Chạy file đã mã hóa trên máy nạn nhân và vẫn kết nối thành công về njRAT.
- **Kết quả**: Kỹ thuật mã hóa đã giúp mã độc qua mặt các cơ chế phát hiện dựa trên chữ ký, chứng tỏ tầm quan trọng của các giải pháp bảo mật nâng cao có khả năng phân tích hành vi.

> *Để xem đầy đủ hình ảnh các bước thực hiện, vui lòng tham khảo file báo cáo gốc tại mục `report/`.*

---

### Lab 5, 7 & 6: Tạo Trojan, Virus và HTTP RAT (P.150, P.57, P.64)

- **Kịch bản**: Kẻ tấn công tạo ra nhiều loại mã độc khác nhau (Trojan, virus, HTTP RAT) để lây nhiễm và điều khiển hệ thống nạn nhân.
- **Mục tiêu**: Tìm hiểu cách tạo và triển khai các loại mã độc khác nhau bằng các công cụ chuyên dụng.
- **Công cụ**: Theef, JPS Virus Maker Tool, HTTP RAT.
- **Tóm tắt thực hiện**:
  1. **Theef**: Chạy file `Server210.exe` trên máy nạn nhân và kết nối từ máy tấn công bằng `Client210.exe` để điều khiển từ xa, bao gồm cả việc quản lý Task Manager.
  2. **JPS Virus Maker**: Sử dụng công cụ để tạo một file virus với các chức năng phá hoại được chọn trước như vô hiệu hóa Taskbar, Control Panel và tự động khởi động cùng Windows.
  3. **HTTP RAT**: Tạo một file `httpserver.exe`, khi chạy trên máy nạn nhân, nó sẽ mở một web server cho phép kẻ tấn công truy cập và điều khiển máy nạn nhân qua trình duyệt web.
- **Kết quả**: Các công cụ này cho thấy việc tạo ra mã độc với các chức năng tùy chỉnh là tương đối dễ dàng, nhấn mạnh sự cần thiết của việc phòng chống từ phía người dùng (không chạy file lạ) và các biện pháp bảo mật mạng.

> *Để xem đầy đủ hình ảnh các bước thực hiện, vui lòng tham khảo file báo cáo gốc tại mục `report/`.*

---

### Lab 12: Giám sát kết nối TCP/IP bằng CurrPorts (P.111)

- **Kịch bản**: Một quản trị viên mạng cần kiểm tra các kết nối TCP/IP trên máy chủ để phát hiện các tiến trình đáng ngờ.
- **Mục tiêu**: Học cách sử dụng CurrPorts để phân tích các tiến trình độc hại, các cổng đang sử dụng và tiêu diệt chúng.
- **Công cụ**: CurrPorts, njRAT.
- **Tóm tắt thực hiện**:
  1. Tạo và thực thi một file Trojan từ njRAT trên máy nạn nhân.
  2. Trên máy nạn nhân, khởi chạy CurrPorts để xem tất cả các kết nối mạng đang hoạt động.
  3. Xác định tiến trình `Trojan.exe` đang kết nối đến máy của kẻ tấn công thông qua cổng 6522.
  4. Sử dụng tính năng "Kill Processes Of Selected Ports" của CurrPorts để chấm dứt tiến trình độc hại và đóng kết nối.
- **Kết quả**: CurrPorts đã chứng tỏ là một công cụ giám sát hiệu quả, giúp phát hiện và loại bỏ tiến trình mã độc trong thời gian thực, qua đó cắt đứt kết nối của kẻ tấn công và ngăn chặn thiệt hại.

> *Để xem đầy đủ hình ảnh các bước thực hiện, vui lòng tham khảo file báo cáo gốc tại mục `report/`.*
